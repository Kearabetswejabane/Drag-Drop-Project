(()=>{"use strict";class e{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function t(e){let t=!0;return e&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}function n(e,t,n){const r=n.value;return{configurable:!0,enumerable:!1,get(){return r.bind(this)}}}var r;!function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(r||(r={}));class s{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.people=r,this.status=s}}class i{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class l extends i{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new l),this.instance}addProjects(e,t,n){const i=new s(Math.random().toString(),e,t,n,r.Active);this.projects.push(i),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const o=l.getInstance();class a extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=this.peopleInputElement.value,s={value:n,required:!0,minLength:5},i={value:+r,required:!0,min:1,max:5};return t({value:e,required:!0})&&t(s)&&t(i)?[e,n,+r]:void alert("Invalid Input, please try again.")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault(),console.log(this.titleInputElement.value);const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;console.log(e,n,r),o.addProjects(e,n,r),this.clearInputs()}}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],a.prototype,"submitHandler",null);class c extends e{get Persons(){return 1===this.project.people?"1 person":`${this.project.people} persons`}constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("dragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.Persons+" assigned",this.element.querySelector("p").textContent=this.project.description}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],c.prototype,"dragStartHandler",null);var d=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class u extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const t=e.dataTransfer.getData("text/plain");o.moveProject(t,"active"===this.type?r.Active:r.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new c(this.element.querySelector("ul").id,e)}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),o.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===r.Active:e.status===r.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+"  Projects"}}d([n],u.prototype,"dragOverHandler",null),d([n],u.prototype,"dropHandler",null),d([n],u.prototype,"dragLeaveHandler",null),new a,new u("active"),new u("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T2dDLFlBQWNuRyxLQUFLcUcsS0FBS2tCLGNBQWdCLFlBQzlFLEVBbERBLEdBREM5RixHLG9DQVVELEdBREhBLEcsZ0NBT0csR0FEQ0EsRyxxQ0MvQkQsSUFBSXdDLEVBQ0osSUFBSW1DLEVBQVksVUFDaEIsSUFBSUEsRUFBWSxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhZy1kcm9wLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudHMudHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLXByb2plY3QvLi9zcmMvdXRpbC92YWxpZGF0aW9uLnRzIiwid2VicGFjazovL2RyYWctZHJvcC1wcm9qZWN0Ly4vc3JjL2RlY29yYXRvcnMvYXV0b2JpbmQudHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLXByb2plY3QvLi9zcmMvbW9kZWxzL3Byb2plY3QudHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLXByb2plY3QvLi9zcmMvc3RhdGUvcHJvamVjdC1zdGF0ZS50cyIsIndlYnBhY2s6Ly9kcmFnLWRyb3AtcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QtaW5wdXQudHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWxpc3QudHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLXByb2plY3QvLi9zcmMvYXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG4gICAvL0NvbXBvbmVudCBCYXNlXHJcbiBleHBvcnQgIGFic3RyYWN0IGNsYXNzIENvbXBvbmVudCA8VCBleHRlbmRzIEhUTUxFbGVtZW50LFUgZXh0ZW5kcyBIVE1MRWxlbWVudD4ge1xyXG4gICAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgaG9zdEVsZW1lbnQ6IFQ7IFxyXG4gICAgZWxlbWVudDogVTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZUlkOnN0cmluZyxob3N0RWxlbWVudElkOnN0cmluZyxpbnNlcnRBdFN0YXJ0OmJvb2xlYW4sIG5ld0VsZW1lbnRJZD86c3RyaW5nKXtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlSWQpISBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChob3N0RWxlbWVudElkKSEgYXMgVDtcclxuXHJcbiAgICAgICAgY29uc3QgaW1wb3J0ZWROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LHRydWUpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xyXG4gICAgICAgaWYobmV3RWxlbWVudElkKXtcclxuICAgICAgICAgdGhpcy5lbGVtZW50LmlkID0gbmV3RWxlbWVudElkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGF0dGFjaChpbnNlcnRBdEJlZ2lubmluZzpib29sZWFuKXtcclxuICAgICAgICB0aGlzLmhvc3RFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChpbnNlcnRBdEJlZ2lubmluZz8gJ2FmdGVyYmVnaW4nOiAnYmVmb3JlZW5kJyx0aGlzLmVsZW1lbnQpIFxyXG4gICAgfVxyXG4gICAgYWJzdHJhY3QgY29uZmlndXJlKCk6IHZvaWQ7XHJcbiAgICBhYnN0cmFjdCByZW5kZXJDb250ZW50KCk6IHZvaWQ7XHJcbn0gXHJcbiIsIlxyXG4vL1ZhbGlkYXRpb25cclxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0YWJsZSB7XHJcbiAgICB2YWx1ZTpzdHJpbmd8bnVtYmVyO1xyXG4gICAgcmVxdWlyZWQ/OiBib29sZWFuO1xyXG4gICAgbWluTGVuZ3RoPzpudW1iZXI7XHJcbiAgICBtYXhMZW5ndGg/Om51bWJlcjtcclxuICAgIG1pbj86IG51bWJlcjtcclxuICAgIG1heD86IG51bWJlcjtcclxufVxyXG5cclxuIGV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZSh2YWxpZGF0YWJsZUlucHV0OlZhbGlkYXRhYmxlKXtcclxuICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuICAgIGlmKHZhbGlkYXRhYmxlSW5wdXQpe1xyXG4gICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICE9PSAwO1xyXG4gICAgfVxyXG4gICAgaWYodmFsaWRhdGFibGVJbnB1dC5taW5MZW5ndGggIT0gbnVsbCAmJiB0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ3N0cmluZycpe1xyXG4gICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUubGVuZ3RoID49IHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoICAgXHJcbiAgICB9XHJcbiAgICBpZih2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aCAhPSBudWxsICYmIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS5sZW5ndGggPD0gdmFsaWRhdGFibGVJbnB1dC5tYXhMZW5ndGggICBcclxuICAgIH1cclxuICAgIGlmKHZhbGlkYXRhYmxlSW5wdXQubWluICE9IG51bGwgJiYgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInKXtcclxuICAgICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID49IHZhbGlkYXRhYmxlSW5wdXQubWluICBcclxuICAgIH1cclxuICAgIGlmKHZhbGlkYXRhYmxlSW5wdXQubWF4ICE9IG51bGwgJiYgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInKXtcclxuICAgICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlIDw9IHZhbGlkYXRhYmxlSW5wdXQubWF4ICBcclxuICAgIH1cclxuICAgIHJldHVybiBpc1ZhbGlkO1xyXG59IFxyXG4iLCJcclxuICAgLy8gQXV0b2JpbmQgZGVjb3JhdG9yXHJcbmV4cG9ydCBmdW5jdGlvbiBhdXRvYmluZChfOiBhbnksIF8yOiBzdHJpbmcsIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvcikge1xyXG4gICAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xyXG4gICAgY29uc3QgYWRqRGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yID0ge1xyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGFkakRlc2NyaXB0b3I7IFxyXG59XHJcbiIsIlxyXG5cclxuLy9wcm9qZWN0IFR5cGVcclxuZXhwb3J0IGVudW0gUHJvamVjdFN0YXR1cyB7QWN0aXZlLEZpbmlzaGVkfVxyXG5cclxuLy9Qcm9qZWN0IFR5cGVcclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIGlkOnN0cmluZyxwdWJsaWMgdGl0bGU6c3RyaW5nLHB1YmxpYyBkZXNjcmlwdGlvbjpzdHJpbmcscHVibGljIHBlb3BsZTpudW1iZXIscHVibGljIHN0YXR1czpQcm9qZWN0U3RhdHVzKXtcclxuXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUHJvamVjdCxQcm9qZWN0U3RhdHVzIH0gZnJvbSBcIi4uL21vZGVscy9wcm9qZWN0XCI7XHJcblxyXG4gICAgLy9Qcm9qZWN0IFN0YXRlIE1hbmFnZW1lbnQgQ2xhc3NcclxudHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczogVFtdKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0YXRlIDxUPiB7XHJcbiAgICBwcm90ZWN0ZWQgbGlzdGVuZXJzOkxpc3RlbmVyPFQ+W10gPSBbXTtcclxuICAgIGFkZExpc3RlbmVyKGxpc3RlbmVyRm46TGlzdGVuZXI8VD4pe1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4gZXhwb3J0IGNsYXNzIFByb2plY3RTdGF0ZSBleHRlbmRzIFN0YXRlIDxQcm9qZWN0PntcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBwcm9qZWN0czpQcm9qZWN0W10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogUHJvamVjdFN0YXRlO1xyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKXtcclxuICAgICAgICBpZih0aGlzLmluc3RhbmNlKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgUHJvamVjdFN0YXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBhZGRQcm9qZWN0cyh0aXRsZTpzdHJpbmcsZGVzY3JpcHRpb246c3RyaW5nLCBudW1PZlBlb3BsZTpudW1iZXIpe1xyXG5jb25zdCBuZXdQcm9qZWN0ID1uZXcgUHJvamVjdCAoTWF0aC5yYW5kb20oKS50b1N0cmluZygpLHRpdGxlLGRlc2NyaXB0aW9uLCBudW1PZlBlb3BsZSxQcm9qZWN0U3RhdHVzLkFjdGl2ZVxyXG4pO1xyXG50aGlzLnByb2plY3RzLnB1c2gobmV3UHJvamVjdClcclxudGhpcy51cGRhdGVMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB9XHJcbiAgICBtb3ZlUHJvamVjdChwcm9qZWN0SWQ6c3RyaW5nLCBuZXdTdGF0dXM6UHJvamVjdFN0YXR1cyl7XHJcbiAgICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZChwcmogPT4gcHJqLmlkID09PSBwcm9qZWN0SWQpO1xyXG4gICAgIGlmKHByb2plY3QgJiYgcHJvamVjdC5zdGF0dXMgIT09IG5ld1N0YXR1cyl7XHJcbiAgICAgICAgcHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXM7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKTtcclxuICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHVwZGF0ZUxpc3RlbmVycygpe1xyXG4gICAgICAgIGZvcihjb25zdCBsaXN0ZW5lckZuIG9mIHRoaXMubGlzdGVuZXJzKXtcclxuICAgICAgICAgICAgbGlzdGVuZXJGbih0aGlzLnByb2plY3RzLnNsaWNlKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHByb2plY3RTdGF0ZSA9IFByb2plY3RTdGF0ZS5nZXRJbnN0YW5jZSgpXHJcbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL2Jhc2UtY29tcG9uZW50c1wiO1xyXG5pbXBvcnQgKiBhcyB2YWxpZGF0aW9uIGZyb20gXCIuLi91dGlsL3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHsgYXV0b2JpbmQgYXMgQXV0b2JpbmQgfSBmcm9tIFwiLi4vZGVjb3JhdG9ycy9hdXRvYmluZFwiO1xyXG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tIFwiLi4vc3RhdGUvcHJvamVjdC1zdGF0ZVwiO1xyXG5cclxuLy9Qcm9qZWN0IElucHV0IENsYXNzXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SW5wdXQgZXh0ZW5kcyBDb21wb25lbnQgPEhUTUxEaXZFbGVtZW50LEhUTUxGb3JtRWxlbWVudD4ge1xyXG4gICAgXHJcbiAgICB0aXRsZUlucHV0RWxlbWVudDpIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQ6SFRNTElucHV0RWxlbWVudDtcclxuICAgIHBlb3BsZUlucHV0RWxlbWVudDpIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigncHJvamVjdC1pbnB1dCcsJ2FwcCcsdHJ1ZSwndXNlci1pbnB1dCcpXHJcblxyXG4gICAgdGhpcy50aXRsZUlucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjdGl0bGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI3Blb3BsZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgXHJcbnRoaXMuY29uZmlndXJlKCk7XHJcblxyXG59XHJcbnByaXZhdGUgZ2F0aGVyVXNlcklucHV0KCk6W3N0cmluZyxzdHJpbmcsbnVtYmVyXXx2b2lke1xyXG5jb25zdCBlbnRlcmVkVGl0bGUgPSB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlO1xyXG5jb25zdCBlbnRlcmVkRGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlO1xyXG5jb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWU7XHJcblxyXG5jb25zdCB0aXRsZVZhbGlkYXRhYmxlOnZhbGlkYXRpb24uVmFsaWRhdGFibGUgPSB7XHJcbiAgICB2YWx1ZTplbnRlcmVkVGl0bGUsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxufTtcclxuY29uc3QgZGVzY3JpcHRpb25WYWxpZGF0YWJsZTp2YWxpZGF0aW9uLlZhbGlkYXRhYmxlID0ge1xyXG4gICAgdmFsdWU6ZW50ZXJlZERlc2NyaXB0aW9uLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICBtaW5MZW5ndGg6NVxyXG59O1xyXG5jb25zdCBwZW9wbGVWYWxpZGF0YWJsZTp2YWxpZGF0aW9uLlZhbGlkYXRhYmxlID0ge1xyXG4gICAgdmFsdWU6ICtlbnRlcmVkUGVvcGxlLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICBtaW46MSxcclxuICAgIG1heDogNVxyXG59O1xyXG5cclxuaWYoIXZhbGlkYXRpb24udmFsaWRhdGUodGl0bGVWYWxpZGF0YWJsZSkgfHwgIXZhbGlkYXRpb24udmFsaWRhdGUoZGVzY3JpcHRpb25WYWxpZGF0YWJsZSlcclxuICAgIHx8ICF2YWxpZGF0aW9uLnZhbGlkYXRlKHBlb3BsZVZhbGlkYXRhYmxlKSl7XHJcbmFsZXJ0KCdJbnZhbGlkIElucHV0LCBwbGVhc2UgdHJ5IGFnYWluLicpXHJcbnJldHVybjtcclxufWVsc2V7XHJcbiAgICByZXR1cm4gW2VudGVyZWRUaXRsZSxlbnRlcmVkRGVzY3JpcHRpb24sK2VudGVyZWRQZW9wbGVdXHJcbn1cclxufVxyXG5wcml2YXRlIGNsZWFySW5wdXRzKCl7XHJcbiAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcbiAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xyXG59XHJcbkBBdXRvYmluZFxyXG5wcml2YXRlIHN1Ym1pdEhhbmRsZXIoZXZlbnQ6IEV2ZW50KXtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlKTtcclxuY29uc3QgdXNlcklucHV0ID0gdGhpcy5nYXRoZXJVc2VySW5wdXQoKTtcclxuaWYoQXJyYXkuaXNBcnJheSh1c2VySW5wdXQpKXtcclxuICAgIGNvbnN0IFt0aXRsZSxkZXNjLHBlb3BsZV0gPSB1c2VySW5wdXQ7XHJcbiAgICBjb25zb2xlLmxvZyh0aXRsZSxkZXNjLHBlb3BsZSlcclxuICAgIHByb2plY3RTdGF0ZS5hZGRQcm9qZWN0cyh0aXRsZSxkZXNjLHBlb3BsZSk7XHJcbiAgICB0aGlzLmNsZWFySW5wdXRzKCk7XHJcbn1cclxufVxyXG5jb25maWd1cmUoKXtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpXHJcbn1cclxucmVuZGVyQ29udGVudCgpe1xyXG4gICAgXHJcbn1cclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcbiAgIFxyXG4iLCJcclxuXHJcbmltcG9ydCB7RHJhZ2dhYmxlfSBmcm9tICcuLi9tb2RlbHMvZHJhZy1kcm9wJztcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLWNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnO1xyXG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xyXG5cclxuXHJcbi8vUHJvamVjdEl0ZW0gQ2xhc3NcclxuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtIGV4dGVuZHMgQ29tcG9uZW50IDxIVE1MVUxpc3RFbGVtZW50LEhUTUxMSUVsZW1lbnQ+IGltcGxlbWVudHMgRHJhZ2dhYmxlIHtcclxuICAgIHByaXZhdGUgcHJvamVjdDpQcm9qZWN0O1xyXG5cclxuZ2V0IFBlcnNvbnMoKXtcclxuICAgIGlmKHRoaXMucHJvamVjdC5wZW9wbGUgPT09IDEpe1xyXG4gICAgICAgIHJldHVybiAnMSBwZXJzb24nXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5wcm9qZWN0LnBlb3BsZX0gcGVyc29uc2BcclxuICAgIH1cclxufVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGhvc3RJZDpzdHJpbmcscHJvamVjdDpQcm9qZWN0KXtcclxuICAgICAgICBzdXBlcignc2luZ2xlLXByb2plY3QnLCBob3N0SWQsIGZhbHNlLCBwcm9qZWN0LmlkKTtcclxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG5cclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZSgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gICAgfVxyXG4gICAgQGF1dG9iaW5kXHJcbiAgICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpe1xyXG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuc2V0RGF0YSgndGV4dC9wbGFpbicsIHRoaXMucHJvamVjdC5pZCk7XHJcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyIS5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xyXG4gICAgfVxyXG4gICAgZHJhZ0VuZEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2RyYWdFbmQnKVxyXG4gICAgfTtcclxuICAgIGNvbmZpZ3VyZSgpe1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLHRoaXMuZHJhZ1N0YXJ0SGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLHRoaXMuZHJhZ0VuZEhhbmRsZXIpO1xyXG4gICAgfSAgICBcclxuICAgIHJlbmRlckNvbnRlbnQoKXtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QudGl0bGU7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gzJykhLnRleHRDb250ZW50ID0gdGhpcy5QZXJzb25zICsgJyBhc3NpZ25lZCc7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AnKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QuZGVzY3JpcHRpb247XHJcbiAgICB9XHJcbn0gXHJcbiIsImltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvYXV0b2JpbmRcIjtcclxuaW1wb3J0IHsgRHJhZ1RhcmdldCB9IGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wXCI7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL2Jhc2UtY29tcG9uZW50c1wiO1xyXG5pbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSBcIi4uL21vZGVscy9wcm9qZWN0XCI7XHJcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gXCIuLi9zdGF0ZS9wcm9qZWN0LXN0YXRlXCI7XHJcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSBcIi4vcHJvamVjdC1pdGVtXCI7XHJcbiAgICBcclxuLy9wcm9qZWN0bGlzdCBDbGFzc1xyXG5leHBvcnQgY2xhc3MgUHJvamVjdExpc3QgZXh0ZW5kcyBDb21wb25lbnQgPEhUTUxEaXZFbGVtZW50LEhUTUxFbGVtZW50PiBpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xyXG4gICAgXHJcbiAgICBhc3NpZ25lZFByb2plY3RzOlByb2plY3RbXVxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSB0eXBlOiAnYWN0aXZlJ3wgJ2ZpbmlzaGVkJyl7XHJcbiAgICAgIHN1cGVyKCdwcm9qZWN0LWxpc3QnLCdhcHAnLGZhbHNlLCBgJHt0eXBlfS1wcm9qZWN0c2ApOyAgXHJcbiAgICB0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSBbXTtcclxuICAgICAgIFxyXG5cclxuICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29uZmlndXJlKClcclxuICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBAYXV0b2JpbmRcclxuICAgIGRyYWdPdmVySGFuZGxlcihldmVudDogRHJhZ0V2ZW50KXtcclxuaWYoZXZlbnQuZGF0YVRyYW5zZmVyICYmIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKXtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBsaXN0RWwgPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpITtcclxuICAgIGxpc3RFbC5jbGFzc0xpc3QuYWRkKCdkcm9wcGFibGUnKTtcclxufVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5AYXV0b2JpbmRcclxuICAgIGRyb3BIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpe1xyXG4gICAgICAgIGNvbnN0IHByaklkID0gKGV2ZW50LmRhdGFUcmFuc2ZlciEuZ2V0RGF0YSgndGV4dC9wbGFpbicpKTtcclxuICAgICAgICBwcm9qZWN0U3RhdGUubW92ZVByb2plY3QocHJqSWQsIHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScgPyBQcm9qZWN0U3RhdHVzLkFjdGl2ZTpQcm9qZWN0U3RhdHVzLkZpbmlzaGVkKTtcclxuICAgIH1cclxuXHJcbiAgICBAYXV0b2JpbmRcclxuICAgIGRyYWdMZWF2ZUhhbmRsZXIoXzogRHJhZ0V2ZW50KXtcclxuICAgICAgICBjb25zdCBsaXN0RWwgPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpITtcclxuICAgICAgICBsaXN0RWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcHBhYmxlJyk7IFxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyUHJvamVjdHMoKXtcclxuICAgICAgICBjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YCkhIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XHJcbiAgICAgICAgbGlzdEVsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGZvciAoY29uc3QgcHJqSXRlbSBvZiB0aGlzLmFzc2lnbmVkUHJvamVjdHMpIHtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3IFByb2plY3RJdGVtKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIS5pZCwgcHJqSXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbmZpZ3VyZSgpe1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsdGhpcy5kcmFnT3ZlckhhbmRsZXIpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLHRoaXMuZHJvcEhhbmRsZXIpO1xyXG5cclxuICAgICAgICBwcm9qZWN0U3RhdGUuYWRkTGlzdGVuZXIoKHByb2plY3RzOlByb2plY3RbXSk9PntcclxuICAgICAgICAgICAgY29uc3QgcmVsZXZhbnRQcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcihwcmogPT57XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09ICdhY3RpdmUnKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJqLnN0YXR1cz09PSBQcm9qZWN0U3RhdHVzLkFjdGl2ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByai5zdGF0dXM9PT0gUHJvamVjdFN0YXR1cy5GaW5pc2hlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gcmVsZXZhbnRQcm9qZWN0cztcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpO1xyXG4gICAgICAgIH0pOyAgXHJcbiAgICB9XHJcblxyXG4gICAgIHJlbmRlckNvbnRlbnQoKXtcclxuICAgICAgICBjb25zdCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIS5pZCA9IGxpc3RJZDtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKSEudGV4dENvbnRlbnQgPSB0aGlzLnR5cGUudG9VcHBlckNhc2UoKSArICcgIFByb2plY3RzJ1xyXG4gICAgfVxyXG5cclxuICAgXHJcbn1cclxuXHJcbiIsImltcG9ydCB7UHJvamVjdElucHV0fSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3QtaW5wdXRcIjtcclxuaW1wb3J0IHsgUHJvamVjdExpc3QgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3QtbGlzdFwiO1xyXG5cclxuXHJcblxyXG4gICAgbmV3IFByb2plY3RJbnB1dCgpO1xyXG4gICAgbmV3IFByb2plY3RMaXN0KCdhY3RpdmUnKTtcclxuICAgIG5ldyBQcm9qZWN0TGlzdCgnZmluaXNoZWQnKTsgICAgIFxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZUlkIiwiaG9zdEVsZW1lbnRJZCIsImluc2VydEF0U3RhcnQiLCJuZXdFbGVtZW50SWQiLCJ0aGlzIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiaW1wb3J0ZWROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpZCIsImF0dGFjaCIsImluc2VydEF0QmVnaW5uaW5nIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidmFsaWRhdGUiLCJ2YWxpZGF0YWJsZUlucHV0IiwiaXNWYWxpZCIsInZhbHVlIiwidG9TdHJpbmciLCJ0cmltIiwibGVuZ3RoIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwibWluIiwibWF4IiwiYXV0b2JpbmQiLCJfIiwiXzIiLCJkZXNjcmlwdG9yIiwib3JpZ2luYWxNZXRob2QiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiYmluZCIsIlByb2plY3RTdGF0dXMiLCJQcm9qZWN0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInBlb3BsZSIsInN0YXR1cyIsIlN0YXRlIiwibGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lckZuIiwicHVzaCIsIlByb2plY3RTdGF0ZSIsInN1cGVyIiwicHJvamVjdHMiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiYWRkUHJvamVjdHMiLCJudW1PZlBlb3BsZSIsIm5ld1Byb2plY3QiLCJNYXRoIiwicmFuZG9tIiwiQWN0aXZlIiwidXBkYXRlTGlzdGVuZXJzIiwibW92ZVByb2plY3QiLCJwcm9qZWN0SWQiLCJuZXdTdGF0dXMiLCJwcm9qZWN0IiwiZmluZCIsInByaiIsInNsaWNlIiwicHJvamVjdFN0YXRlIiwiUHJvamVjdElucHV0IiwidGl0bGVJbnB1dEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQiLCJwZW9wbGVJbnB1dEVsZW1lbnQiLCJjb25maWd1cmUiLCJnYXRoZXJVc2VySW5wdXQiLCJlbnRlcmVkVGl0bGUiLCJlbnRlcmVkRGVzY3JpcHRpb24iLCJlbnRlcmVkUGVvcGxlIiwiZGVzY3JpcHRpb25WYWxpZGF0YWJsZSIsInJlcXVpcmVkIiwicGVvcGxlVmFsaWRhdGFibGUiLCJhbGVydCIsImNsZWFySW5wdXRzIiwic3VibWl0SGFuZGxlciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwidXNlcklucHV0IiwiQXJyYXkiLCJpc0FycmF5IiwiZGVzYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW5kZXJDb250ZW50IiwiUHJvamVjdEl0ZW0iLCJQZXJzb25zIiwiaG9zdElkIiwiZHJhZ1N0YXJ0SGFuZGxlciIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiZHJhZ0VuZEhhbmRsZXIiLCJ0ZXh0Q29udGVudCIsIlByb2plY3RMaXN0IiwidHlwZSIsImFzc2lnbmVkUHJvamVjdHMiLCJkcmFnT3ZlckhhbmRsZXIiLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsImRyb3BIYW5kbGVyIiwicHJqSWQiLCJnZXREYXRhIiwiRmluaXNoZWQiLCJkcmFnTGVhdmVIYW5kbGVyIiwicmVtb3ZlIiwicmVuZGVyUHJvamVjdHMiLCJpbm5lckhUTUwiLCJwcmpJdGVtIiwicmVsZXZhbnRQcm9qZWN0cyIsImZpbHRlciIsImxpc3RJZCIsInRvVXBwZXJDYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==